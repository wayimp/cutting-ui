{"ast":null,"code":"var _jsxFileName = \"/Users/keith/cutting-ui/pages/reports.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect } from 'react';\nimport Router from 'next/router';\nimport axiosClient from '../src/axiosClient';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { wrapper } from '../components/store';\nimport { fade, makeStyles, useTheme } from '@material-ui/core/styles';\nimport { getLangString } from '../components/Lang';\nimport Link from '../src/Link';\nimport TopBar from '../components/TopBar';\nimport AddLocationIcon from '@material-ui/icons/AddLocation';\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\nimport SendIcon from '@material-ui/icons/Send';\nimport numeral from 'numeral';\nconst priceFormat = '$0.00';\nimport OrderCard from '../components/OrderCard';\nimport { flatten } from 'lodash';\nimport moment from 'moment';\nconst dateFormat = 'YYYY-MM-DDTHH:mm:SS';\nconst dateDisplay = 'dddd MMMM DD';\nimport { Container, Card, Grid, Paper, List, ListItem, ListItemAvatar, ListItemText, Typography, Table, TableBody, TableCell, TableRow, FormControl, InputLabel, Input, FormHelperText, Button, Modal, Backdrop, Fade, TextField } from '@material-ui/core';\nimport { Map as GoogleMap, InfoWindow, Marker, GoogleApiWrapper } from 'google-maps-react';\nimport { useSnackbar } from 'notistack';\nimport cookie from 'js-cookie';\nconst useStyles = makeStyles(theme => ({\n  toolbar: _objectSpread({\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n    padding: theme.spacing(0, 1)\n  }, theme.mixins.toolbar),\n  center: {\n    textAlign: 'center'\n  },\n  content: {\n    textAlign: 'center',\n    flexGrow: 1,\n    padding: theme.spacing(7)\n  },\n  root: {\n    flexGrow: 1\n  },\n  center: {\n    textAlign: 'center',\n    flexGrow: 1\n  },\n  lines: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    flexGrow: 1,\n    borderTop: '1px solid #ccc',\n    borderLeft: '1px solid #ccc',\n    borderRight: '1px solid #ccc',\n    '&:last-child': {\n      borderBottom: '1px solid #ccc'\n    }\n  },\n  nolines: {\n    borderBottom: '2px solid white'\n  },\n  flexGrid: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    flexGrow: 1\n  },\n  modal: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  section: {\n    backgroundColor: '#EEF',\n    border: '1px solid #AAA',\n    margin: '5px',\n    padding: '8px'\n  }\n}));\n\nconst Page = ({\n  dispatch,\n  lang,\n  cart,\n  google,\n  token\n}) => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const langSuffix = lang ? lang.substring(0, 2) : 'en';\n  const [open, setOpen] = React.useState(false);\n  const [reports, setreports] = React.useState([]);\n  const {\n    enqueueSnackbar\n  } = useSnackbar();\n\n  const getData = () => {\n    console.log('token:' + token);\n    dispatch({\n      type: 'SEGMENT',\n      payload: 'reports'\n    });\n    axiosClient({\n      method: 'get',\n      url: '/reports',\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(response => {\n      setreports(Array.isArray(response.data) ? response.data : []);\n    });\n  };\n\n  const onFocus = () => {\n    getData();\n  };\n\n  useEffect(() => {\n    window.addEventListener('focus', onFocus);\n    return () => {\n      window.removeEventListener('focus', onFocus);\n    };\n  });\n  const reportsSorted = reports.map(order => _objectSpread(_objectSpread({}, order), {}, {\n    daySubmitted: moment(order.timeline[0].timestamp, dateFormat).locale(lang.substring(0, 2)).format(dateDisplay)\n  })).sort(function (a, b) {\n    const dateA = new Date(a.timeline[0].timestamp),\n          dateB = new Date(b.timeline[0].timestamp);\n    return dateB - dateA;\n  });\n  const days = Array.isArray(reportsSorted) ? [...new Set(reportsSorted.map(order => order.daySubmitted))] : [];\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  useEffect(() => {\n    alert('checking token in effect:' + token);\n\n    if (token && token.length > 0) {\n      getData();\n    } else {//Router.push('/')\n    }\n  }, []);\n  return __jsx(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 5\n    }\n  }, __jsx(TopBar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }\n  }), __jsx(\"main\", {\n    className: classes.content,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: classes.toolbar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 9\n    }\n  }), __jsx(\"div\", {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 9\n    }\n  }, days.map(day => __jsx(Card, {\n    key: day,\n    className: classes.section,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 13\n    }\n  }, __jsx(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 15\n    }\n  }, day), __jsx(Grid, {\n    container: true,\n    spacing: 2,\n    direction: \"row\",\n    justify: \"flex-start\",\n    alignItems: \"flex-start\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 15\n    }\n  }, reportsSorted.filter(border => border.daySubmitted === day).map(border => __jsx(OrderCard, {\n    key: border._id,\n    border: border,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 21\n    }\n  }))))))));\n};\n\nexport default connect(state => state)(Page);","map":{"version":3,"sources":["/Users/keith/cutting-ui/pages/reports.js"],"names":["React","useState","useEffect","Router","axiosClient","connect","compose","wrapper","fade","makeStyles","useTheme","getLangString","Link","TopBar","AddLocationIcon","LocationOnIcon","SendIcon","numeral","priceFormat","OrderCard","flatten","moment","dateFormat","dateDisplay","Container","Card","Grid","Paper","List","ListItem","ListItemAvatar","ListItemText","Typography","Table","TableBody","TableCell","TableRow","FormControl","InputLabel","Input","FormHelperText","Button","Modal","Backdrop","Fade","TextField","Map","GoogleMap","InfoWindow","Marker","GoogleApiWrapper","useSnackbar","cookie","useStyles","theme","toolbar","display","alignItems","justifyContent","padding","spacing","mixins","center","textAlign","content","flexGrow","root","lines","borderTop","borderLeft","borderRight","borderBottom","nolines","flexGrid","modal","section","backgroundColor","border","margin","Page","dispatch","lang","cart","google","token","classes","langSuffix","substring","open","setOpen","reports","setreports","enqueueSnackbar","getData","console","log","type","payload","method","url","headers","Authorization","then","response","Array","isArray","data","onFocus","window","addEventListener","removeEventListener","reportsSorted","map","order","daySubmitted","timeline","timestamp","locale","format","sort","a","b","dateA","Date","dateB","days","Set","handleOpen","handleClose","alert","length","day","filter","_id","state"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport Router from 'next/router'\nimport axiosClient from '../src/axiosClient'\nimport { connect } from 'react-redux'\nimport { compose } from 'redux'\nimport { wrapper } from '../components/store'\nimport { fade, makeStyles, useTheme } from '@material-ui/core/styles'\nimport { getLangString } from '../components/Lang'\nimport Link from '../src/Link'\nimport TopBar from '../components/TopBar'\nimport AddLocationIcon from '@material-ui/icons/AddLocation'\nimport LocationOnIcon from '@material-ui/icons/LocationOn'\nimport SendIcon from '@material-ui/icons/Send'\nimport numeral from 'numeral'\nconst priceFormat = '$0.00'\nimport OrderCard from '../components/OrderCard'\nimport { flatten } from 'lodash'\nimport moment from 'moment'\nconst dateFormat = 'YYYY-MM-DDTHH:mm:SS'\nconst dateDisplay = 'dddd MMMM DD'\nimport {\n  Container,\n  Card,\n  Grid,\n  Paper,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  Typography,\n  Table,\n  TableBody,\n  TableCell,\n  TableRow,\n  FormControl,\n  InputLabel,\n  Input,\n  FormHelperText,\n  Button,\n  Modal,\n  Backdrop,\n  Fade,\n  TextField\n} from '@material-ui/core'\nimport {\n  Map as GoogleMap,\n  InfoWindow,\n  Marker,\n  GoogleApiWrapper\n} from 'google-maps-react'\nimport { useSnackbar } from 'notistack'\nimport cookie from 'js-cookie'\n\nconst useStyles = makeStyles(theme => ({\n  toolbar: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar\n  },\n  center: {\n    textAlign: 'center'\n  },\n  content: {\n    textAlign: 'center',\n    flexGrow: 1,\n    padding: theme.spacing(7)\n  },\n  root: {\n    flexGrow: 1\n  },\n  center: {\n    textAlign: 'center',\n    flexGrow: 1\n  },\n  lines: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    flexGrow: 1,\n    borderTop: '1px solid #ccc',\n    borderLeft: '1px solid #ccc',\n    borderRight: '1px solid #ccc',\n    '&:last-child': {\n      borderBottom: '1px solid #ccc'\n    }\n  },\n  nolines: {\n    borderBottom: '2px solid white'\n  },\n  flexGrid: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    flexGrow: 1\n  },\n  modal: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  section: {\n    backgroundColor: '#EEF',\n    border: '1px solid #AAA',\n    margin: '5px',\n    padding: '8px'\n  }\n}))\n\nconst Page = ({ dispatch, lang, cart, google, token }) => {\n  const classes = useStyles()\n  const theme = useTheme()\n  const langSuffix = lang ? lang.substring(0, 2) : 'en'\n  const [open, setOpen] = React.useState(false)\n  const [reports, setreports] = React.useState([])\n  const { enqueueSnackbar } = useSnackbar()\n\n  const getData = () => {\n    console.log('token:' + token)\n    dispatch({ type: 'SEGMENT', payload: 'reports' })\n    axiosClient({\n      method: 'get',\n      url: '/reports',\n      headers: { Authorization: `Bearer ${token}` }\n    }).then(response => {\n      setreports(Array.isArray(response.data) ? response.data : [])\n    })\n  }\n\n  const onFocus = () => {\n    getData()\n  }\n\n  useEffect(() => {\n    window.addEventListener('focus', onFocus)\n    return () => {\n      window.removeEventListener('focus', onFocus)\n    }\n  })\n\n  const reportsSorted = reports\n    .map(order => ({\n      ...order,\n      daySubmitted: moment(order.timeline[0].timestamp, dateFormat)\n        .locale(lang.substring(0, 2))\n        .format(dateDisplay)\n    }))\n    .sort(function (a, b) {\n      const dateA = new Date(a.timeline[0].timestamp),\n        dateB = new Date(b.timeline[0].timestamp)\n      return dateB - dateA\n    })\n\n  const days = Array.isArray(reportsSorted)\n    ? [...new Set(reportsSorted.map(order => order.daySubmitted))]\n    : []\n\n  const handleOpen = () => {\n    setOpen(true)\n  }\n\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  useEffect(() => {\n    alert('checking token in effect:' + token)\n    if (token && token.length > 0) {\n      getData()\n    } else {\n      //Router.push('/')\n    }\n  }, [])\n\n  return (\n    <Container>\n      <TopBar />\n      <main className={classes.content}>\n        <div className={classes.toolbar} />\n        <div className={classes.root}>\n          {days.map(day => (\n            <Card key={day} className={classes.section}>\n              <h3>{day}</h3>\n              <Grid\n                container\n                spacing={2}\n                direction='row'\n                justify='flex-start'\n                alignItems='flex-start'\n              >\n                {reportsSorted\n                  .filter(border => border.daySubmitted === day)\n                  .map(border => (\n                    <OrderCard key={border._id} border={border} />\n                  ))}\n              </Grid>\n            </Card>\n          ))}\n        </div>\n      </main>\n    </Container>\n  )\n}\n\nexport default connect(state => state)(Page)\n"]},"metadata":{},"sourceType":"module"}